import"./DsnmJJEf.js";import"./DiPfm8AY.js";import{t as w,a as g,ag as B,p as D,i as H,d as V,e as z,h as i,c as E,r as j,s as F,b as J,j as A,ab as R,f as L}from"./BjvSjcul.js";import{s as d,b as K,a as Q}from"./CW0Rmjp7.js";import{p as h}from"./jvGfUjpY.js";import{B as P}from"./DMJpNjgS.js";import{o as U}from"./D3QfO92x.js";import{s as N}from"./Bq_urSBn.js";import{i as S}from"./BzP6EuCB.js";import{e as Y,a as $}from"./DdQPfq-y.js";import{d as e2}from"./BKgqJ5jk.js";import{h as t2,g as s2,r as o2}from"./CFWGTvxy.js";var r2=B('<svg viewBox="0 0 18 12" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M6.2002 11.1992L0.700195 5.69922L6.2002 10.9492L16.7002 0.699219L6.2002 11.1992Z" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function M2(p,t){let c=h(t,"variant",8,"fill"),C=h(t,"strokeWidth",8,1.4),n=h(t,"color",8,"hsl(var(--foreground))"),r=h(t,"size",8,24),f=h(t,"className",8,"");P(p,{get variant(){return c()},get strokeWidth(){return C()},get color(){return n()},get size(){return r()},get className(){return f()},children:(u,x)=>{var e=r2();w(()=>{d(e,"width",r()),d(e,"height",r()),d(e,"fill",c()==="fill"?n():"none"),d(e,"stroke",c()==="outline"?n():"none"),d(e,"stroke-width",c()==="outline"?C():0)}),g(u,e)},$$slots:{default:!0}})}var n2=B('<svg viewBox="0 0 22 22" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.9202 0.699219H17.5202C18.0794 0.699219 18.5011 0.699219 18.8354 0.726534C19.1702 0.753883 19.4201 0.808716 19.6373 0.919386C20.0173 1.11305 20.3264 1.42207 20.52 1.80216C20.6307 2.01936 20.6855 2.26925 20.7129 2.60399C20.7402 2.93831 20.7402 3.35903 20.7402 3.91828V11.5192C20.7402 12.0785 20.7402 12.5001 20.7129 12.8344C20.6855 13.1692 20.6307 13.4191 20.52 13.6363C20.3264 14.0164 20.0173 14.3254 19.6373 14.5191C19.4201 14.6297 19.1702 14.6846 18.8354 14.7119C18.5011 14.7392 18.0804 14.7392 17.5211 14.7392H14.7402V17.5192C14.7402 18.0785 14.7402 18.5001 14.7129 18.8344C14.6855 19.1692 14.6307 19.4191 14.52 19.6363C14.3264 20.0164 14.0173 20.3254 13.6373 20.5191C13.4201 20.6297 13.1702 20.6846 12.8354 20.7119C12.5011 20.7392 12.0804 20.7392 11.5211 20.7392H3.9202C3.36094 20.7392 2.93929 20.7392 2.60497 20.7119C2.27023 20.6846 2.02034 20.6297 1.80313 20.5191C1.42305 20.3254 1.11403 20.0164 0.920362 19.6363C0.809693 19.4191 0.75486 19.1692 0.72751 18.8344C0.700195 18.5001 0.700195 18.0794 0.700195 17.5202V9.91922C0.700195 9.35997 0.700195 8.93831 0.72751 8.60399C0.75486 8.26925 0.809693 8.01936 0.920362 7.80216C1.11403 7.42207 1.42305 7.11305 1.80313 6.91939C2.02034 6.80872 2.27023 6.75388 2.60497 6.72653C2.93929 6.69922 3.35999 6.69922 3.91923 6.69922H6.7002V3.91922C6.7002 3.35998 6.7002 2.93831 6.72751 2.60399C6.75486 2.26925 6.80969 2.01936 6.92036 1.80216C7.11403 1.42207 7.42305 1.11305 7.80313 0.919386C8.02034 0.808716 8.27023 0.753883 8.60497 0.726534C8.93929 0.699219 9.36095 0.699219 9.9202 0.699219ZM3.9202 6.73922C3.35981 6.73922 2.94073 6.73923 2.60823 6.7664C2.27596 6.79355 2.03192 6.84771 1.82129 6.95503C1.44873 7.14486 1.14583 7.44776 0.956002 7.82032C0.848685 8.03094 0.794525 8.27498 0.767377 8.60725C0.740211 8.93975 0.740195 9.35884 0.740195 9.91922V17.5192C0.740195 18.0796 0.740211 18.4987 0.767377 18.8312C0.794525 19.1635 0.848685 19.4075 0.956002 19.6181C1.14583 19.9907 1.44873 20.2936 1.82129 20.4834C2.03192 20.5907 2.27596 20.6449 2.60823 20.672C2.94073 20.6992 3.35981 20.6992 3.9202 20.6992H11.5202C12.0806 20.6992 12.4997 20.6992 12.8322 20.672C13.1644 20.6449 13.4085 20.5907 13.6191 20.4834C13.9917 20.2936 14.2946 19.9907 14.4844 19.6181C14.5917 19.4075 14.6459 19.1635 14.673 18.8312C14.7002 18.4987 14.7002 18.0796 14.7002 17.5192V9.91922C14.7002 9.35884 14.7002 8.93975 14.673 8.60725C14.6459 8.27498 14.5917 8.03094 14.4844 7.82032C14.2946 7.44776 13.9917 7.14486 13.6191 6.95503C13.4085 6.84771 13.1644 6.79355 12.8322 6.7664C12.4997 6.73923 12.0806 6.73922 11.5202 6.73922H3.9202ZM14.7402 14.6992V9.91922C14.7402 9.35996 14.7402 8.93831 14.7129 8.60399C14.6855 8.26925 14.6307 8.01936 14.52 7.80216C14.3264 7.42207 14.0173 7.11305 13.6373 6.91939C13.4201 6.80872 13.1702 6.75388 12.8354 6.72653C12.5011 6.69922 12.0804 6.69922 11.5212 6.69922H6.7402V3.91922C6.7402 3.35884 6.74021 2.93975 6.76738 2.60725C6.79452 2.27498 6.84868 2.03094 6.956 1.82032C7.14583 1.44776 7.44873 1.14486 7.82129 0.955026C8.03192 0.847708 8.27596 0.793548 8.60823 0.766401C8.94073 0.739234 9.35981 0.739219 9.9202 0.739219H17.5202C18.0806 0.739219 18.4997 0.739234 18.8322 0.766401C19.1644 0.793548 19.4085 0.847708 19.6191 0.955026C19.9917 1.14486 20.2946 1.44776 20.4844 1.82032C20.5917 2.03094 20.6459 2.27498 20.673 2.60725C20.7002 2.93975 20.7002 3.35884 20.7002 3.91922V11.5192C20.7002 12.0796 20.7002 12.4987 20.673 12.8312C20.6459 13.1635 20.5917 13.4075 20.4844 13.6181C20.2946 13.9907 19.9917 14.2936 19.6191 14.4834C19.4085 14.5907 19.1644 14.6449 18.8322 14.672C18.4997 14.6992 18.0806 14.6992 17.5202 14.6992H14.7402Z"></path></svg>');function E2(p,t){let c=h(t,"variant",8,"fill"),C=h(t,"strokeWidth",8,1.4),n=h(t,"color",8,"hsl(var(--foreground))"),r=h(t,"size",8,24),f=h(t,"className",8,"");P(p,{get variant(){return c()},get strokeWidth(){return C()},get color(){return n()},get size(){return r()},get className(){return f()},children:(u,x)=>{var e=n2();w(()=>{d(e,"width",r()),d(e,"height",r()),d(e,"fill",c()==="fill"?n():"none"),d(e,"stroke",c()==="outline"?n():"none"),d(e,"stroke-width",c()==="outline"?C():0)}),g(u,e)},$$slots:{default:!0}})}const a2="nostr:(npub|nprofile|nevent|naddr)1",W=new RegExp(`${a2}[a-z0-9]+`,"gi"),I=/:([^:\s]{1,100}):/g,l2=p=>{const t=new Map;if(!p)return t;for(const{shortcode:c,url:C}of p){const n=c.toLowerCase();t.has(n)||t.set(n,C)}return t};function i2(p){const{text:t,emojiTags:c}=p,C=l2(c),n=[];let r;for(W.lastIndex=0,t.toLowerCase();(r=W.exec(t))!==null;){const e=r[0];e.slice(0,6);const a=e.slice(6);try{const s=e2(a);if(s.type==="npub"||s.type==="nprofile"){const o=s.type==="npub"?s.data:s.data.pubkey;n.push({index:r.index,length:e.length,segment:{type:"mention",npub:a,pubkey:o,label:void 0}})}else(s.type==="nevent"||s.type==="naddr")&&n.push({index:r.index,length:e.length,segment:{type:"nostr_ref",raw:e,kind:s.type}})}catch{}}for(I.lastIndex=0;(r=I.exec(t))!==null;){const e=r[0],a=r[1],s=r.index,o=s+e.length;if(!n.some(m=>s>=m.index&&s<m.index+m.length||o>m.index&&o<=m.index+m.length)&&a){const m=C.get(a.toLowerCase())??null;n.push({index:s,length:e.length,segment:{type:"emoji",shortcode:a,url:m??""}})}}n.sort((e,a)=>e.index-a.index);const f=[];for(const e of n){const a=f[f.length-1];(f.length===0||!a||e.index>=a.index+a.length)&&f.push(e)}const u=[];let x=0;for(const{index:e,length:a,segment:s}of f){if(e>x){const o=t.slice(x,e);u.push({type:"text",value:o})}u.push(s),x=e+a}return x<t.length&&u.push({type:"text",value:t.slice(x)}),u.length===0&&u.push({type:"text",value:t}),u}var c2=L('<span class="short-text-text svelte-19fw8ys"> </span>'),d2=L('<a class="short-text-mention svelte-19fw8ys"> </a>'),h2=L('<img class="short-text-emoji svelte-19fw8ys" loading="lazy" decoding="async"/>'),u2=L('<span class="short-text-emoji-fallback svelte-19fw8ys"> </span>'),v2=L('<div class="short-text-nostr-card svelte-19fw8ys"><span class="short-text-nostr-card-label svelte-19fw8ys">Nostr reference</span> <span class="short-text-nostr-card-kind svelte-19fw8ys"> </span></div>'),C2=L('<div data-short-text=""></div>');function N2(p,t){D(t,!0);let c=h(t,"content",3,""),C=h(t,"emojiTags",19,()=>[]),n=h(t,"class",3,""),r=A(!0);U(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)");H(r,s.matches,!0);const o=k=>H(r,k.matches,!0);return s.addEventListener("change",o),()=>s.removeEventListener("change",o)});const f=R(()=>({text:c(),emojiTags:C()})),u=R(()=>i2(i(f)));function x(s){return t.resolveMentionLabel?.(s.pubkey)??s.pubkey.slice(0,8)}function e(s){const o=t2(s),k=s2(o,i(r));return`color: ${o2(k)}`}var a=C2();Y(a,21,()=>i(u),$,(s,o)=>{var k=V(),m=z(k);{var Z=v=>{var l=c2(),y=E(l,!0);j(l),w(()=>N(y,i(o).value)),g(v,l)},O=v=>{var l=d2(),y=E(l);j(l),w((M,T)=>{d(l,"href",`/profile/${i(o).npub??""}`),K(l,M),N(y,`@${T??""}`)},[()=>e(i(o).pubkey),()=>x(i(o))]),g(v,l)},X=v=>{var l=V(),y=z(l);{var M=b=>{var _=h2();w(()=>{d(_,"src",i(o).url),d(_,"alt",`:${i(o).shortcode??""}:`)}),g(b,_)},T=b=>{var _=u2(),q=E(_);j(_),w(()=>N(q,`:${i(o).shortcode??""}:`)),g(b,_)};S(y,b=>{i(o).url?b(M):b(T,!1)})}g(v,l)},G=v=>{var l=v2(),y=F(E(l),2),M=E(y,!0);j(y),j(l),w(()=>N(M,i(o).kind)),g(v,l)};S(m,v=>{i(o).type==="text"?v(Z):i(o).type==="mention"?v(O,1):i(o).type==="emoji"?v(X,2):i(o).type==="nostr_ref"&&v(G,3)})}g(s,k)}),j(a),w(()=>Q(a,1,`short-text-renderer ${n()??""}`,"svelte-19fw8ys")),g(p,a),J()}export{M2 as C,N2 as S,E2 as a,i2 as p};
