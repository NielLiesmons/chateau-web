import"./DsnmJJEf.js";import"./DiPfm8AY.js";import{p as re,ad as b,i as h,af as v,h as r,ae as se,c,r as o,a as d,s as _,D as n,t as L,b as ae,a2 as A,f}from"./BjvSjcul.js";import{s as S,e as x}from"./Bq_urSBn.js";import{i as C}from"./BzP6EuCB.js";import{i as ie,e as G,a as I}from"./DdQPfq-y.js";import{a as oe}from"./CW0Rmjp7.js";import{p as T}from"./jvGfUjpY.js";import{g as J}from"./DGij43mE.js";import{n as ne}from"./CFWGTvxy.js";import{A as K}from"./0kLvaOWM.js";import{P as ce}from"./DyiQJiiZ.js";var le=f('<div class="empty-slot svelte-2eoy5"></div>'),ve=f('<div class="icon-slot svelte-2eoy5"><!></div>'),de=f('<div class="empty-slot svelte-2eoy5"></div>'),fe=f('<div class="icon-slot svelte-2eoy5"><!></div>'),me=f('<span class="stack-description svelte-2eoy5"> </span>'),pe=f('<div class="creator-row svelte-2eoy5" role="button" tabindex="0"><!> <span class="creator-name svelte-2eoy5"> </span></div>'),ue=f('<div role="button" tabindex="0"><div class="icons-grid svelte-2eoy5"><div class="icons-grid-mobile svelte-2eoy5"></div> <div class="icons-grid-desktop svelte-2eoy5"></div></div> <div class="stack-info svelte-2eoy5"><div class="stack-text svelte-2eoy5"><span class="stack-name svelte-2eoy5"> </span> <!></div> <!></div></div>');function ze(M,y){re(y,!1);const g=A(),w=A(),k=A(),P=A();let s=T(y,"stack",8),H=T(y,"href",8,""),O=T(y,"className",8,"");function Q(t){return typeof t=="string"&&/^[0-9a-f]{64}$/i.test(t.trim())}function R(t){if(!Q(t))return"";try{return ne.npubEncode(t.trim().toLowerCase())}catch{return""}}function j(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}function V(t,e=5){if(!t)return"";const a=t.trim().split(/\s+/),l=a.slice(0,e).join(" ");return a.length>e?l+"â€¦":l}function X(t,e){return!t||!e?!1:t.toLowerCase().trim()===e.toLowerCase().trim()}function F(){H()&&J(H())}function W(t){t.stopPropagation();const e=s().creator?.npub||R(s().creator?.pubkey),a=e?`/profile/${e}`:"#";a!=="#"&&J(a)}b(()=>v(s()),()=>{h(g,(s().apps||[]).slice(0,4))}),b(()=>r(g),()=>{h(w,[...r(g),...Array(4-r(g).length).fill(null)])}),b(()=>v(s()),()=>{h(k,j(s().name)||j(V(s().description,5))||"Untitled Stack")}),b(()=>(v(s()),r(k)),()=>{h(P,!s().name||!s().description||X(s().name,s().description)?`A stack of curated ${r(k)} applications`:s().description)}),se(),ie();var m=ue(),U=c(m),z=c(U);G(z,5,()=>r(w),I,(t,e)=>{var a=ve(),l=c(a);{var u=i=>{K(i,{get iconUrl(){return r(e),n(()=>r(e).icon)},get name(){return r(e),n(()=>r(e).name)},get identifier(){return r(e),n(()=>r(e).dTag)},size:"xs"})},p=i=>{var E=le();d(i,E)};C(l,i=>{r(e)?i(u):i(p,!1)})}o(a),d(t,a)}),o(z);var q=_(z,2);G(q,5,()=>r(w),I,(t,e)=>{var a=fe(),l=c(a);{var u=i=>{K(i,{get iconUrl(){return r(e),n(()=>r(e).icon)},get name(){return r(e),n(()=>r(e).name)},get identifier(){return r(e),n(()=>r(e).dTag)},size:"sm"})},p=i=>{var E=de();d(i,E)};C(l,i=>{r(e)?i(u):i(p,!1)})}o(a),d(t,a)}),o(q),o(U);var B=_(U,2),N=c(B),D=c(N),Y=c(D,!0);o(D);var Z=_(D,2);{var $=t=>{var e=me(),a=c(e,!0);o(e),L(()=>S(a,r(P))),d(t,e)};C(Z,t=>{r(P)&&t($)})}o(N);var ee=_(N,2);{var te=t=>{var e=pe(),a=c(e);ce(a,{get pictureUrl(){return v(s()),n(()=>s().creator.picture)},get name(){return v(s()),n(()=>s().creator.name)},get pubkey(){return v(s()),n(()=>s().creator.pubkey)},size:"xs"});var l=_(a,2),u=c(l,!0);o(l),o(e),L(()=>S(u,(v(s()),n(()=>s().creator.name||"Anonymous")))),x("click",e,W),x("keydown",e,p=>p.key==="Enter"&&W(p)),d(t,e)};C(ee,t=>{v(s()),n(()=>s().creator)&&t(te)})}o(B),o(m),L(()=>{oe(m,1,`app-stack-card ${O()??""}`,"svelte-2eoy5"),S(Y,r(k))}),x("click",m,F),x("keydown",m,t=>t.key==="Enter"&&F()),d(M,m),ae()}export{ze as A};
